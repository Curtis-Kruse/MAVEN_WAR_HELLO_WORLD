stage('Docker Deploy') {
    steps {
        echo '=== Docker Deploy ==='
        // Use Ansible to deploy the Docker container
        echo 'Running Ansible playbook...'
        script {
            try {
                ansiblePlaybook(
                    playbook: 'deploy-docker.yml',
                    inventory: 'dev.inv'
                )
            } catch (Exception e) {
                echo "Failed to run Ansible playbook: ${e.message}"
                echo "Printing Jenkins workspace contents:"
                sh 'ls -R'
                throw e
            }
        }
    }
}
